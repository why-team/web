<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>论文搜索结果</title>
</head>
<body>

<input class="query" type="text" placeholder="Eg: Thailand" id="query">
<script>
    const urlParams = new URLSearchParams(window.location.search);
    let query = urlParams.get('query');
    // console.log("Log:", query);
    query = query.trimStart();
    // console.log("Log:", query);
    if(query === "")
    {

    }else{
        const query = document.getElementById('query').value;

        // 构建要发送给后端的数据对象
        const dataToSend = { query };


        // 发送 POST 请求到后端
        fetch('http://localhost:3000/api/process-data', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',

            },
            body: JSON.stringify(dataToSend)
        })
            .then(response => response.json())
            .then(data => {
                // 处理后端返回的数据

                const total_number = data.count;
                const datalist = data.articles;

                createHtmlElement(total_number, datalist);
                // createPagination(3);

            })
            .catch(error => {
                console.error('Error:', error);
            });
    }
</script>
<button onclick="sendData()" id="search_button">Send Data</button>
<h1>论文搜索结果</h1>

<div id="results">
    <h2 id="search_num"></h2>
    <div id="display">

    </div>

    <div class="pagination" id="pagination">
    </div>
</div>
</body>
<script src="Search_results.js"></script>
</html>
